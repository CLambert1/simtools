<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="simtools">
<title>Simulate virtual environment • simtools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate virtual environment">
<meta property="og:description" content="simtools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">simtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/simulate-virtual-environment.html">Simulate virtual environment</a>
    <a class="dropdown-item" href="../articles/simulate-virtual-species.html">Simulate virtual species</a>
    <a class="dropdown-item" href="../articles/simulate-individual-movements.html">Simulate individual movements</a>
    <a class="dropdown-item" href="../articles/simulate-survey.html">Simulate survey</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Simulate virtual environment</h1>
            
      
      
      <div class="d-none name"><code>simulate-virtual-environment.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">simtools</span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from dev/flat_simulate_env.Rmd: do not edit by hand -->
<!-- Run this 'development' chunk -->
<!-- Store every call to library() that you need to explore your functions -->
<div class="section level2">
<h2 id="create-the-grid">Create the grid<a class="anchor" aria-label="anchor" href="#create-the-grid"></a>
</h2>
<p>Create the grid structuring the virtual environment. By default, the
function creates a grid spanning 0 to 90° in both longitude and
latitude, with steps of 0.5.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_grid.html">create_grid</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generating-environmental-layers">Generating environmental layers<a class="anchor" aria-label="anchor" href="#generating-environmental-layers"></a>
</h2>
<p>The function creates several environmental layers using Gaussian
simulation from the grid locations. The number of layers generated is
set by n. The generated layers can be normalised, and be returned either
only as data frame or both in data frame and raster formats
(SpatRast).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_grid.html">create_grid</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/generate_env_layer.html">generate_env_layer</a></span><span class="op">(</span>norm <span class="op">=</span> <span class="cn">FALSE</span>, return_rasters <span class="op">=</span> <span class="cn">FALSE</span>, grid <span class="op">=</span> <span class="va">grid</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [using unconditional Gaussian simulation]</span></span>
<span><span class="co">#&gt; 'data.frame':    32761 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;  $ x   : num  0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 ...</span></span>
<span><span class="co">#&gt;  $ y   : num  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">#&gt;  $ sim1: num  4.71 5.35 4.81 7.42 6.74 ...</span></span>
<span><span class="co">#&gt;  $ sim2: num  -0.377 -0.575 -0.766 -3.876 -4.276 ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/generate_env_layer.html">generate_env_layer</a></span><span class="op">(</span>norm <span class="op">=</span> <span class="cn">TRUE</span>, return_rasters <span class="op">=</span> <span class="cn">FALSE</span>, grid <span class="op">=</span> <span class="va">grid</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [using unconditional Gaussian simulation]</span></span>
<span><span class="co">#&gt; 'data.frame':    32761 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;  $ x   : num  0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 ...</span></span>
<span><span class="co">#&gt;  $ y   : num  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">#&gt;  $ sim1: num  0.213 0.234 0.217 0.301 0.279 ...</span></span>
<span><span class="co">#&gt;  $ sim2: num  0.455 0.45 0.445 0.367 0.357 ...</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; terra 1.7.18</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/generate_env_layer.html">generate_env_layer</a></span><span class="op">(</span>norm <span class="op">=</span> <span class="cn">TRUE</span>, return_rasters <span class="op">=</span> <span class="cn">TRUE</span>, grid <span class="op">=</span> <span class="va">grid</span><span class="op">)</span><span class="op">$</span><span class="va">rasters</span><span class="op">)</span></span>
<span><span class="co">#&gt; [using unconditional Gaussian simulation]</span></span></code></pre></div>
<p><img src="simulate-virtual-environment_files/figure-html/example-generate_env_layer-1.png" width="700"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/generate_env_layer.html">generate_env_layer</a></span><span class="op">(</span>norm <span class="op">=</span> <span class="cn">FALSE</span>, return_rasters <span class="op">=</span> <span class="cn">TRUE</span>, grid <span class="op">=</span> <span class="va">grid</span><span class="op">)</span><span class="op">$</span><span class="va">rasters</span><span class="op">)</span></span>
<span><span class="co">#&gt; [using unconditional Gaussian simulation]</span></span></code></pre></div>
<p><img src="simulate-virtual-environment_files/figure-html/example-generate_env_layer-2.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="build-the-suitability-layer">Build the suitability layer<a class="anchor" aria-label="anchor" href="#build-the-suitability-layer"></a>
</h2>
<p>The function permits building a suitability layer from a set of
environmental layers and beta parameters to be leveraged with. It mimics
a basic resource selection function, where a given environmental layer
is simply scaled by the beta parameter (env*beta) and several leveraged
env layers are additively combined. For more elaborate procedures, see
the package .</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="co"># simple example</span></span>
<span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_grid.html">create_grid</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">cdt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_env_layer.html">generate_env_layer</a></span><span class="op">(</span>grid <span class="op">=</span> <span class="va">grid</span><span class="op">)</span></span>
<span><span class="co">#&gt; [using unconditional Gaussian simulation]</span></span>
<span><span class="va">rsce</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_resource_layer.html">generate_resource_layer</a></span><span class="op">(</span>env_layers <span class="op">=</span> <span class="va">cdt</span><span class="op">$</span><span class="va">rasters</span>,</span>
<span>                            beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">rsce</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ dataframe:'data.frame':   32761 obs. of  3 variables:</span></span>
<span><span class="co">#&gt;   ..$ x          : num [1:32761] 0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 ...</span></span>
<span><span class="co">#&gt;   ..$ y          : num [1:32761] 90 90 90 90 90 90 90 90 90 90 ...</span></span>
<span><span class="co">#&gt;   ..$ suitability: num [1:32761] 0.566 0.546 0.56 0.554 0.527 ...</span></span>
<span><span class="co">#&gt;  $ rasters  :S4 class 'SpatRaster' [package "terra"]</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rsce</span><span class="op">$</span><span class="va">rasters</span><span class="op">)</span></span></code></pre></div>
<p><img src="simulate-virtual-environment_files/figure-html/example-generate_resource_layer-1.png" width="700"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># also works when coordinates are not names x,y</span></span>
<span><span class="va">cdt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_env_layer.html">generate_env_layer</a></span><span class="op">(</span>grid <span class="op">=</span> <span class="va">grid</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">$</span><span class="va">dataframe</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>lon <span class="op">=</span> <span class="va">x</span>, lat <span class="op">=</span> <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; [using unconditional Gaussian simulation]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/generate_resource_layer.html">generate_resource_layer</a></span><span class="op">(</span>env_layers <span class="op">=</span> <span class="va">cdt2</span>, coordinate_fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lon"</span>, <span class="st">"lat"</span><span class="op">)</span>,</span>
<span>                            beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1.5</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">)</span></span>
<span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ dataframe:'data.frame':   32761 obs. of  3 variables:</span></span>
<span><span class="co">#&gt;   ..$ lon        : num [1:32761] 0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 ...</span></span>
<span><span class="co">#&gt;   ..$ lat        : num [1:32761] 0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">#&gt;   ..$ suitability: num [1:32761] 0.389 0.346 0.37 0.328 0.324 ...</span></span>
<span><span class="co">#&gt;  $ rasters  :S4 class 'SpatRaster' [package "terra"]</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Charlotte Lambert.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
